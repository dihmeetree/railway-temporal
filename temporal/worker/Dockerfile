FROM temporalio/auto-setup:1.22.2

ARG DB DBNAME DB_PORT POSTGRES_USER POSTGRES_PWD POSTGRES_SEEDS

COPY ../dynamic.yaml /etc/temporal/config/dynamicconfig/dynamic.yaml

ENV BIND_ON_IP="0.0.0.0"
ENV DYNAMIC_CONFIG_FILE_PATH="config/dynamicconfig/dynamic.yaml"
ENV PROMETHEUS_ENDPOINT="0.0.0.0:8003"
ENV SERVICES="worker"
ENV TEMPORAL_BROADCAST_ADDRESS="127.0.0.1"
ENV TEMPORAL_HISTORY_NAMESPACEDEFAULT_ARCHIVAL_FILESTORE="enabled"
ENV TEMPORAL_VISIBILITY_NAMESPACEDEFAULT_ARCHIVAL_FILESTORE="enabled"
